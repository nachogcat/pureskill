document.addEventListener("DOMContentLoaded",function(){initializeParallaxEffect();initializeSpeedLines();createTrackingLines();initializeHoverEffects();initializeTypingEffect();initializeScrollReveal()});function initializeParallaxEffect(){const parallaxElements=document.querySelectorAll(".hero, .page-banner, .circuit-lines");window.addEventListener("mousemove",function(e){const mouseX=e.clientX/window.innerWidth;const mouseY=e.clientY/window.innerHeight;parallaxElements.forEach(element=>{const intensity=element.classList.contains("hero")?30:15;const translateX=(mouseX-.5)*intensity;const translateY=(mouseY-.5)*intensity;element.style.transform=`translate(${translateX}px, ${translateY}px)`})});document.addEventListener("mouseleave",function(){parallaxElements.forEach(element=>{element.style.transform="translate(0, 0)"})})}function initializeSpeedLines(){const hero=document.querySelector(".hero");if(!hero)return;let speedLinesContainer=document.querySelector(".dynamic-speed-lines");if(!speedLinesContainer){speedLinesContainer=document.createElement("div");speedLinesContainer.className="dynamic-speed-lines";speedLinesContainer.style.position="absolute";speedLinesContainer.style.top="0";speedLinesContainer.style.left="0";speedLinesContainer.style.width="100%";speedLinesContainer.style.height="100%";speedLinesContainer.style.overflow="hidden";speedLinesContainer.style.pointerEvents="none";speedLinesContainer.style.zIndex="1";hero.appendChild(speedLinesContainer)}const numLines=15;for(let i=0;i<numLines;i++){createSpeedLine(speedLinesContainer)}}function createSpeedLine(container){const line=document.createElement("div");line.className="speed-line";const height=Math.random()*1+1;const width=Math.random()*100+100;const top=Math.random()*100;const delay=Math.random()*2;const duration=Math.random()*2+1;const color=Math.random()>.7?"rgba(255, 0, 255, 0.1)":"rgba(0, 255, 255, 0.1)";line.style.position="absolute";line.style.height=`${height}px`;line.style.width=`${width}px`;line.style.top=`${top}%`;line.style.right="-100px";line.style.backgroundColor=color;line.style.transform="skewX(-30deg)";line.style.animationDelay=`${delay}s`;line.style.animation=`speedLine ${duration}s linear infinite`;if(!document.querySelector("#speed-line-keyframes")){const style=document.createElement("style");style.id="speed-line-keyframes";style.innerHTML=`
            @keyframes speedLine {
                0% {
                    transform: translateX(0) skewX(-30deg);
                    opacity: 0;
                }
                10% {
                    opacity: 1;
                }
                90% {
                    opacity: 1;
                }
                100% {
                    transform: translateX(-${window.innerWidth+100}px) skewX(-30deg);
                    opacity: 0;
                }
            }
        `;document.head.appendChild(style)}container.appendChild(line);setTimeout(()=>{container.removeChild(line);createSpeedLine(container)},duration*1e3)}function createTrackingLines(){const sections=document.querySelectorAll(".hero, .page-banner, .next-race-section, .features-section");sections.forEach((section,index)=>{for(let i=0;i<3;i++){const trackingLine=document.createElement("div");trackingLine.className="tracking-line";const top=20+i*30;const delay=i*.5+index*.2;trackingLine.style.top=`${top}%`;trackingLine.style.animationDelay=`${delay}s`;section.appendChild(trackingLine)}})}function initializeHoverEffects(){const glowElements=document.querySelectorAll(".btn, .team-card, .feature-card, .race-card");glowElements.forEach(element=>{element.addEventListener("mouseenter",function(){element.style.transition="all 0.3s ease";if(element.classList.contains("btn")){element.style.boxShadow="0 0 15px rgba(0, 255, 255, 0.6), 0 0 30px rgba(0, 255, 255, 0.3)"}else{element.style.boxShadow="0 10px 25px rgba(0, 0, 0, 0.8), 0 0 15px rgba(0, 255, 255, 0.3)";element.style.transform="translateY(-5px)";element.style.borderColor="var(--primary)"}});element.addEventListener("mouseleave",function(){if(element.classList.contains("btn")){element.style.boxShadow=""}else{element.style.boxShadow="";element.style.transform="";element.style.borderColor=""}})});const teamCards=document.querySelectorAll(".team-card");teamCards.forEach(card=>{card.addEventListener("mouseenter",function(){this.classList.add("hover");this.style.transform="scale(1.02) translateY(-5px)";this.style.transition="all 0.3s ease"});card.addEventListener("mouseleave",function(){this.classList.remove("hover");this.style.transform=""})})}function initializeTypingEffect(){const typingElements=document.querySelectorAll(".hero-subtitle, .banner-content p");typingElements.forEach(element=>{const text=element.textContent;element.textContent="";const wrapper=document.createElement("div");wrapper.className="typing-wrapper";wrapper.style.display="inline-block";wrapper.style.overflow="hidden";wrapper.style.borderRight="0.15em solid var(--primary)";wrapper.style.whiteSpace="nowrap";wrapper.style.margin="0 auto";wrapper.style.animation="typing 3.5s steps(40, end), blink-caret .75s step-end infinite";wrapper.textContent=text;element.appendChild(wrapper);setTimeout(()=>{wrapper.style.animation="";wrapper.style.borderRight="none"},3500)})}function initializeScrollReveal(){const elements=document.querySelectorAll(".news-card, .feature-card, .race-card, .team-card, "+".format-card, .regulation-card, .info-card, "+".contact-card, .social-platform, .accordion-item");const observer=new IntersectionObserver(entries=>{entries.forEach(entry=>{if(entry.isIntersecting){entry.target.classList.add("fade-in-view");const children=entry.target.querySelectorAll("h3, p, .btn, .info-icon, .feature-icon");children.forEach((child,index)=>{child.style.opacity="0";child.style.animation=`fadeIn 0.5s forwards ${index*.1}s`});observer.unobserve(entry.target)}})},{root:null,threshold:.1,rootMargin:"0px 0px -50px 0px"});elements.forEach(element=>{observer.observe(element)})}document.addEventListener("click",function(e){const link=e.target.closest("a");if(link&&link.href&&link.hostname===window.location.hostname&&!link.hasAttribute("target")&&!e.ctrlKey&&!e.metaKey){e.preventDefault();document.body.style.opacity="0";document.body.style.transition="opacity 0.3s ease";setTimeout(()=>{window.location.href=link.href},300)}});window.addEventListener("pageshow",function(e){if(e.persisted){document.body.style.opacity="0";setTimeout(()=>{document.body.style.opacity="1"},10)}else{document.body.style.opacity="1";document.body.style.transition="opacity 0.3s ease"}});