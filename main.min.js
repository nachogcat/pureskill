document.addEventListener("DOMContentLoaded",function(){initializeCountdown();initializeFilters();initializeTabs();initializeRulesTabs();initializeAccordion();addScrollEffects();const navToggle=document.getElementById("nav-toggle");if(navToggle){navToggle.addEventListener("change",function(){document.body.classList.toggle("menu-open",this.checked)})}document.addEventListener("click",function(event){const menu=document.querySelector(".nav-menu");const navToggle=document.getElementById("nav-toggle");if(menu&&navToggle&&navToggle.checked){const isClickInside=menu.contains(event.target)||event.target.closest(".nav-toggle-label");if(!isClickInside){navToggle.checked=false;document.body.classList.remove("menu-open")}}});const modals=document.querySelectorAll(".modal");const closeButtons=document.querySelectorAll(".close-modal, #close-modal, #contact-close-modal");closeButtons.forEach(button=>{button.addEventListener("click",function(){modals.forEach(modal=>{modal.style.display="none"})})});modals.forEach(modal=>{modal.addEventListener("click",function(event){if(event.target===modal){modal.style.display="none"}})});document.addEventListener("keydown",function(event){if(event.key==="Escape"){modals.forEach(modal=>{modal.style.display="none"})}})});function initializeCountdown(){const countdownElement=document.getElementById("race-countdown");if(!countdownElement)return;const targetDate=new Date("2024-05-12T20:00:00+02:00").getTime();const countdownInterval=setInterval(function(){const now=(new Date).getTime();const distance=targetDate-now;const days=Math.floor(distance/(1e3*60*60*24));const hours=Math.floor(distance%(1e3*60*60*24)/(1e3*60*60));const minutes=Math.floor(distance%(1e3*60*60)/(1e3*60));const seconds=Math.floor(distance%(1e3*60)/1e3);document.querySelector(".countdown-item .days").textContent=days.toString().padStart(2,"0");document.querySelector(".countdown-item .hours").textContent=hours.toString().padStart(2,"0");document.querySelector(".countdown-item .minutes").textContent=minutes.toString().padStart(2,"0");document.querySelector(".countdown-item .seconds").textContent=seconds.toString().padStart(2,"0");if(distance<0){clearInterval(countdownInterval);document.querySelector(".countdown-item .days").textContent="00";document.querySelector(".countdown-item .hours").textContent="00";document.querySelector(".countdown-item .minutes").textContent="00";document.querySelector(".countdown-item .seconds").textContent="00";const countdownTitle=document.querySelector(".countdown-title");if(countdownTitle){countdownTitle.textContent="Race in progress!";countdownTitle.classList.add("neon-flicker")}}},1e3)}function initializeFilters(){const filterButtons=document.querySelectorAll(".filter-btn");if(filterButtons.length===0)return;filterButtons.forEach(button=>{button.addEventListener("click",function(){filterButtons.forEach(btn=>btn.classList.remove("active"));this.classList.add("active");const filter=this.getAttribute("data-filter");const raceCards=document.querySelectorAll(".race-card");raceCards.forEach(card=>{if(filter==="all"){card.style.display="block"}else{const status=card.getAttribute("data-status");card.style.display=status===filter?"block":"none"}});setTimeout(()=>{document.querySelectorAll('.race-card[style="display: block;"]').forEach((card,index)=>{card.style.animationDelay=`${index*.05}s`;card.style.animation="fadeIn 0.5s forwards"})},10)})})}function initializeTabs(){const tabButtons=document.querySelectorAll(".tab-btn");if(tabButtons.length===0)return;tabButtons.forEach(button=>{button.addEventListener("click",function(){tabButtons.forEach(btn=>btn.classList.remove("active"));this.classList.add("active");const target=this.getAttribute("data-tab");document.querySelectorAll(".tab-panel").forEach(panel=>{panel.classList.remove("active")});document.getElementById(`${target}-panel`).classList.add("active")})})}function initializeRulesTabs(){const rulesNavItems=document.querySelectorAll(".rules-nav-item");if(rulesNavItems.length===0)return;rulesNavItems.forEach(item=>{item.addEventListener("click",function(){rulesNavItems.forEach(navItem=>navItem.classList.remove("active"));this.classList.add("active");const target=this.getAttribute("data-target");document.querySelectorAll(".rules-panel").forEach(panel=>{panel.classList.remove("active")});document.getElementById(`${target}-panel`).classList.add("active")})})}function initializeAccordion(){const accordionItems=document.querySelectorAll(".accordion-item");if(accordionItems.length===0)return;accordionItems.forEach(item=>{const header=item.querySelector(".accordion-header");header.addEventListener("click",function(){item.classList.toggle("active");accordionItems.forEach(otherItem=>{if(otherItem!==item){otherItem.classList.remove("active")}})})})}function addScrollEffects(){const animatedElements=document.querySelectorAll(".feature-card, .news-card, .race-card, .format-card, .team-card, .regulation-card, .info-card, .contact-card, .social-platform");const observer=new IntersectionObserver(entries=>{entries.forEach(entry=>{if(entry.isIntersecting){entry.target.classList.add("fade-in");observer.unobserve(entry.target)}})},{root:null,threshold:.1,rootMargin:"0px"});animatedElements.forEach(element=>{observer.observe(element)})}function generateReferenceNumber(){const prefix="PSL";const timestamp=(new Date).getTime().toString().slice(-6);const random=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return`${prefix}-${timestamp}-${random}`}